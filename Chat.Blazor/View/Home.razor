@page "/"
@using Chat.Core.ViewModel
@inject HomeViewModel ViewModel;
@using System.Collections.ObjectModel
@inherits Base

<div style="height:600px;overflow: auto;">
    @foreach (var message in ViewModel.Messages)
    {
        <MudPaper Class="pa-0 ma-0" Elevation="3">
            <MudCardContent>
                <MudStack Spacing="1" Row="true">
                    <MudText Typo="Typo.body1" Color="Color.Primary">@message.Name</MudText>
                    <MudText Typo="Typo.body1">@message.Body</MudText>
                </MudStack>
            </MudCardContent>
        </MudPaper>
        <br />
    }
</div>

<div style="height:500px;overflow:auto;">
    <MudStack Spacing="1" Row="true">
        <MudTextField @bind-Value="ViewModel.Name" Label="Name" FullWidth="false" Variant="Variant.Outlined"></MudTextField>
        <MudTextField @bind-Value="ViewModel.Message" Label="Message" Variant="Variant.Outlined"></MudTextField>
    </MudStack>
    <br />
    <MudButton Variant="Variant.Filled"
               FullWidth="true"
               OnClick="ViewModel.Broadcast"
               Color="Color.Primary">Send</MudButton>
</div>

@code { protected override void OnInitialized() => SetViewModel(ViewModel); }